<!DOCTYPE html>
<!-- File: index.html | Purpose: Main landing layout and battle UI scaffold. | Notes: Updated to support SP gauge and dark hero background. -->
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TMA Battle Arena</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="clear-screen.css">
</head>
<body>
  <header class="hero">
    <div class="hero__overlay">
      <div class="hero__logo">
        <img src="TMA icon_01.png" alt="TMAファミリーのエンブレム" width="250" height="250">
      </div>
      <p class="hero__eyebrow">THE MAFIA ANIMAL</p>
      <h1 class="hero__title">TMA Battle Arena</h1>
      <p class="hero__lead">極秘抗争に挑むビーストたちを指揮し、読み合いで頂点を奪え。<br>コマンド選択とタイミングでファミリーの未来が決まる。</p>
      <div class="hero__actions">
        <button id="start-btn" class="btn btn--primary">ゲーム開始</button>
        <a href="#abilities" class="btn btn--ghost">能力一覧を見る</a>
      </div>
    </div>
  </header>
  <main>
    <section id="game" class="game" aria-live="polite">
      <div class="stage-progress" id="stage-progress">
        <div class="stage-progress__item" data-stage="0">
          <span class="stage-progress__label">1st ROUND</span>
          <span class="stage-progress__dot"></span>
        </div>
        <div class="stage-progress__item" data-stage="1">
          <span class="stage-progress__label">2nd ROUND</span>
          <span class="stage-progress__dot"></span>
        </div>
        <div class="stage-progress__item" data-stage="2">
          <span class="stage-progress__label">3rd ROUND</span>
          <span class="stage-progress__dot"></span>
        </div>
      </div>
      <div class="battlefield">
        <article class="combatant combatant--player">
          <div class="combatant__header">
            <span class="combatant__role">PLAYER</span>
            <h2 class="combatant__name" id="player-name">---</h2>
          </div>
          <div class="combatant__image-frame" id="player-image-frame">
            <span class="combatant__placeholder">[NO ENTRY]</span>
            <img id="player-image" class="combatant__image" alt="プレイヤーのカード">
          </div>
          <div class="stat-block">
            <div class="hp-bar" aria-label="プレイヤーHP">
              <div class="hp-bar__value" id="player-hp"></div>
            </div>
            <div class="sp-bar" aria-label="プレイヤーSP">
              <span class="sp-bar__label">SP</span>
              <div class="sp-bar__track">
                <div class="sp-bar__value" id="player-sp"></div>
              </div>
              <span class="sp-bar__count" id="player-sp-count">0 / 10</span>
            </div>
            <dl class="stat-list" id="player-stats"></dl>
          </div>
          <ul class="status-list" id="player-status"></ul>
          <div class="ability-detail">
            <p class="ability-detail__name" id="player-ability-name">---</p>
            <p class="ability-detail__desc" id="player-ability-desc">スキル情報はバトル開始後に表示されます。</p>
          </div>
        </article>
        <article class="combatant combatant--enemy">
          <div class="combatant__header">
            <span class="combatant__role">ENEMY</span>
            <h2 class="combatant__name" id="enemy-name">---</h2>
          </div>
          <div class="combatant__image-frame" id="enemy-image-frame">
            <span class="combatant__placeholder">[NO ENTRY]</span>
            <img id="enemy-image" class="combatant__image" alt="敵のカード">
          </div>
          <div class="stat-block">
            <div class="hp-bar" aria-label="敵HP">
              <div class="hp-bar__value" id="enemy-hp"></div>
            </div>
            <div class="sp-bar" aria-label="敵SP">
              <span class="sp-bar__label">SP</span>
              <div class="sp-bar__track">
                <div class="sp-bar__value" id="enemy-sp"></div>
              </div>
              <span class="sp-bar__count" id="enemy-sp-count">0 / 10</span>
            </div>
            <dl class="stat-list" id="enemy-stats"></dl>
          </div>
          <ul class="status-list" id="enemy-status"></ul>
          <div class="ability-detail">
            <p class="ability-detail__name" id="enemy-ability-name">---</p>
            <p class="ability-detail__desc" id="enemy-ability-desc">スキル情報はバトル開始後に表示されます。</p>
          </div>
        </article>
      </div>
      <div class="action-summary" id="action-summary">
        <div class="action-summary__column action-summary__column--player">
          <span class="action-summary__label">PLAYER</span>
          <div class="action-summary__value" id="player-action">---</div>
        </div>
        <div class="action-summary__column action-summary__column--enemy">
          <span class="action-summary__label">ENEMY</span>
          <div class="action-summary__value" id="enemy-action">---</div>
        </div>
      </div>
      <div class="command-toolbar">
        <div class="command-panel" id="command-panel">
          <button class="command" data-command="attack">
            <span class="command__title">アタック</span>
            <span class="command__desc">最も基本的な攻撃。敵のHPを確実に削ります。</span>
          </button>
          <button class="command" data-command="guard">
            <span class="command__title">ガード</span>
            <span class="command__desc">敵の攻撃を受け止め、SPが2溜まります。</span>
          </button>
          <button class="command" data-command="break">
            <span class="command__title">ブレイク</span>
            <span class="command__desc">守りを崩し、ガード中の相手にも圧力をかけます。</span>
          </button>
          <button class="command" data-command="skill">
            <span class="command__title">スキル</span>
            <span class="command__desc">SPを消費して固有技を放ち、戦況を変えます。</span>
          </button>
        </div>
      </div>
      <div class="battle-console">
        <section class="battle-console__column battle-console__column--log">
          <div class="game-log" id="game-log" aria-live="polite"></div>
        </section>
        <section class="battle-console__column battle-console__column--commands">
          <div class="next-stage" id="next-stage" hidden>
            <p id="next-stage-message">CLEAR!</p>
            <button class="btn btn--primary" id="next-stage-btn">次のラウンドへ</button>
          </div>
          <div class="game-over" id="game-over" hidden>
            <h3 id="game-over-title">RESULT</h3>
            <p id="game-over-message"></p>
            <button class="btn btn--primary" id="restart-btn">ファミリーを再招集</button>
          </div>
        </section>
      </div>
    </section>

    <section class="guide" id="guide">
      <div class="guide__content">
        <h2>遊び方</h2>
        <p>プレイヤーと敵はコマンドを宣言し、交互に行動して決着を目指します。3ラウンド制のバトルを勝ち抜き、ファミリーを勝利へ導きましょう。</p>
        <div class="command-guide">
          <div class="command-guide__item">
            <h3>アタック</h3>
            <p>最も基本的な攻撃。敵のHPを確実に削ります。</p>
          </div>
          <div class="command-guide__item">
            <h3>ガード</h3>
            <p>敵の攻撃を受け止め、SPが2溜まります。</p>
          </div>
          <div class="command-guide__item">
            <h3>ブレイク</h3>
            <p>守りを崩し、ガード中の相手にも圧力をかけます。</p>
          </div>
          <div class="command-guide__item">
            <h3>スキル</h3>
            <p>SPを消費して固有技を放ち、戦況を変えます。</p>
          </div>
        </div>
      </div>
    </section>

    <section class="ability-catalog" id="abilities">
      <div class="ability-catalog__header">
        <h2>能力とスキル一覧</h2>
        <p>プレイヤーと敵の能力を確認し、ラウンドごとの戦略に役立てましょう。</p>
      </div>
      <div class="ability-grid" id="ability-grid"></div>
    </section>
  </main>
  <div class="game-clear-overlay" id="game-clear-overlay" hidden>
    <div class="game-clear-popup">
      <div class="clear-header">
        <h2 class="clear-title">MISSION COMPLETE</h2>
        <div class="clear-subtitle">作戦完了</div>
      </div>
      
      <div class="clear-content">
        <div class="clear-commander">
          <div class="clear-commander-portrait">
            <img id="clear-player-image" class="clear-commander-image" alt="">
          </div>
          <div class="clear-commander-info">
            <span id="clear-player-name" class="clear-commander-name"></span>
            <span class="clear-commander-title">指揮官</span>
            <span id="clear-player-animal" class="clear-commander-animal"></span>
          </div>
        </div>

        <div class="clear-battles">
          <div class="clear-battles-grid">
            <div class="clear-battle-card">
              <span class="clear-battle-round">1st</span>
              <img id="clear-enemy-1-image" class="clear-battle-image" alt="">
              <span id="clear-enemy-1-name" class="clear-battle-name"></span>
            </div>
            <div class="clear-battle-card">
              <span class="clear-battle-round">2nd</span>
              <img id="clear-enemy-2-image" class="clear-battle-image" alt="">
              <span id="clear-enemy-2-name" class="clear-battle-name"></span>
            </div>
            <div class="clear-battle-card">
              <span class="clear-battle-round">3rd</span>
              <img id="clear-enemy-3-image" class="clear-battle-image" alt="">
              <span id="clear-enemy-3-name" class="clear-battle-name"></span>
            </div>
          </div>
        </div>
      </div>

      <button class="clear-button" id="clear-restart-btn">NEW GAME</button>
    </div>
  </div>

  <footer class="site-footer">
    <small>&copy; 2025 TMA Battle Arena</small>
  </footer>
  <script src="game-data.js"></script>
  <script defer src="game.js"></script>
</body>
</html>

